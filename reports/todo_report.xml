<?xml version="1.0"?>
<odoo>
  <report id="action_todo_task_report"
    string="To-do Tasks"
    model="todo.task"
    report_type="qweb-pdf"
    name="todo_stage.report_todo_task_template"
    />

  <template id="report_todo_task_template">
    <t t-call="web.html_container">
      <t t-call="web.external_layout">
        <div class="page">
          <div class="container">

            <!-- Report header content -->
            <div class="row bg-primary">
              <div class="col-2">What</div>
              <div class="col-2">Who</div>
              <div class="col-2">When</div>
              <div class="col-4">Where</div>
              <div class="col-2">Watchers</div>
            </div>

            <t t-foreach="docs" t-as="o">
              <div class="row">
                <!-- Report row content -->
                <div class="col-2">
                  <h6><span t-field="o.name"/></h6>
                </div>
                <div class="col-2">
                  <span t-field="o.user_id"/>
                </div>
                <div class="col-2">
                  <span t-field="o.date_deadline"
                    t-options="{'widget': 'date'}"/>
                </div>
                <div class="col-4">
                  <div t-field="res_company.partner_id"
                    t-options='{
                    "widget": "contact",
                    "fields": ["address", "name", "phone", "fax"],
                    "no_marker": true}'/>
                </div>
                <div class="col-2">
                  <!--Render followers -->
                  <ul class="media-list">
                    <t t-foreach="o.message_follower_ids" t-as="f">
                      <li t-if="f.partner_id.image_small"
                        class="media-left">
                        <span t-field="f.partner_id.image_small"
                          t-options="{'widget':'image'}"
                          class="media-object"/>
                        <span class="media-body"
                          t-field="f.partner_id.name"/>
                      </li>
                    </t>
                  </ul>
                </div>
              </div>
            </t>

            <!-- Report footer content -->
          </div>
        </div>
      </t>
    </t>
  </template>
</odoo>
