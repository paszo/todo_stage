<?xml version="1.0"?>
<odoo>

  <!-- Add Kanban view mode to the menu Action: -->
  <record id="todo_app.action_todo_task" model="ir.actions.act_window">
    <field name="view_mode">kanban,tree,form,calendar,graph,pivot</field>
  </record>

  <!-- Add Kanban view -->
  <record id="todo_task_kanban" model="ir.ui.view">
    <field name="model">todo.task</field>
    <field name="arch" type="xml">
      <kanban default_group_by="stage_id" class="o_kanban_small_column">
        <!-- Fields to use in expressions -->
        <field name="stage_id"/>
        <field name="color"/>
        <field name="kanban_state"/>
        <field name="priority"/>
        <field name="is_done"/>
        <field name="message_partner_ids"/>
        <!-- Optional progress bar -->
        <progressbar
          field="kanban_state"
          colors='{"done": "success", "blocked": "danger"}'/>
        <!-- Templates with HTML snippets to use ... -->
        <templates>
          <!-- Define the kanban-box template -->
          <t t-name="kanban-box">
            <!-- Set the Kanban card color: -->
            <div t-attf-class="oe_kanban_color_#{kanban_getcolor(record.color.raw_value)} oe_kanban_global_click">
              <div class="o_dropdown_kanban dropdown">
                <!-- Top-right drop down menu here...-->
              </div>
              <div class="oe_kanban_body">
                <!-- Content elements and fields go here -->
              </div>
              <div class="oe_kanban_footer">
                <div class="oe_kanban_footer_left">
                  <!-- Left hand footer -->
                </div>
                <div class="oe_kanban_footer_right">
                  <!-- Right hand footer -->
                </div>
              </div>
              <div class="oe_clear"/>
            </div>


          </t>
        </templates>
      </kanban>
    </field>
  </record>
</odoo>
